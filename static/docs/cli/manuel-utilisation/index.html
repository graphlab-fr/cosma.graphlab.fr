<!doctype html>
<html lang="fr">
<head>
	<meta charset=utf-8 />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="generator" content="">

	<title>Cosma ‚Äî Manuel d‚Äôutilisation ‚Äî CLI</title>

	<meta name="description" content="Manuel d‚Äôutilisation de Cosma CLI v2." />
	<meta name="author" content="Arthur Perret,Guillaume Brioudes" />
	<meta name="copyright" content="GPL-3.0-or-later"/>
	<meta name="last_edit" content="2022-11-08" />

	<meta property="og:type" content="website" />
	<meta property="og:title" content="Cosma ‚Äî Manuel d‚Äôutilisation ‚Äî CLI" />
	<meta property="og:description" content="Manuel d‚Äôutilisation de Cosma CLI v2." />
	<meta property="og:site_name" content="cosma-docs" />

	<meta itemprop="name" content="cosma-docs" />
	<meta itemprop="description" content="Manuel d‚Äôutilisation de Cosma CLI v2." />

	<link rel="schema.DC" href="https://purl.org/dc/elements/1.1/" />
	<link rel="schema.DCTERMS" href="https://purl.org/dc/terms/" />  

	<meta property="DC.title" content="Cosma ‚Äî Manuel d‚Äôutilisation ‚Äî CLI" />
	<meta property="DC.contributor" content="Arthur Perret,Guillaume Brioudes" />
	<meta property="DC.date" content="2022-11-08" />
	<meta property="DC.language" content="fr" />
	<meta property="DC.description" lang="fr" content="Manuel d‚Äôutilisation de Cosma CLI v2." />
	<meta property="DC.rights" content="GPL-3.0-or-later" />

	<meta name="twitter:site" content="@arthurperret" />
	<meta name="twitter:creator" content="@arthurperret" />
	<meta name="twitter:title" content="Cosma ‚Äî Manuel d‚Äôutilisation ‚Äî CLI" />
	<meta name="twitter:description" content="Manuel d‚Äôutilisation de Cosma CLI v2." />
	<meta name="twitter:card"  content="summary" />
	<meta name="twitter:image" content="https://cosma.graphlab.fr/img/cosma-icone.png" />

	<style>
        :root {
	--sans: "Helvetica Neue", Helvetica, sans-serif;
	--serif: "Georgia", 'Garamond', 'Time New Roman', 'Times', serif;
	--mono: Menlo, Monaco, Consolas, "Courier New", monospace;
	--code-background-color: #f5f5f5;
	--code-border-color: #ccc;
}

/* LAYOUT */

* {
	box-sizing: border-box;
}
body {
  margin: 0;
  padding: 0 1em;
	line-height: 1.5;
  max-width: 1000px;
  margin: 0 auto;
  font-family: var(--serif);
  display: grid;
  grid-template-columns: 70% 30%;
  grid-gap: 0 1%;
  grid-template-areas: "header headernav"
                       "main   aside"
                       "footer footer";
}
header {
  grid-area: header;
}
nav.nav-lang {
  grid-area: headernav;
  font-family: var(--sans);
}
.nav-lang ul {
  display: flex;
  justify-content: space-between;
  list-style:none;
  padding: 0;
  margin-top: 1.8em;
}
main {
  grid-area: main;
  padding-bottom: 5vh;
}

/* HEADINGS */

header, h1, h2, h3, h4 {
	font-family: var(--sans);
}
h2, h3, h4 {
	line-height: 1.2;
	padding-bottom: 0.2em;
	border-bottom: 1px solid black;
  font-size: 1.2em;
}
main h2 {
	font-size: 1.3em;
	margin: 3.5rem 0 0.5rem 0;
}
main > h2:first-child {
	margin-top: 0;
}
main h3 {
  font-size: 1.2em;
  margin: 3rem 0 0.3rem 0;
}
main h4 {
  font-size: 1em;
  margin: 2rem 0 0 0;
}

/* LINKS */

a {
	color: #0056b3;
	text-decoration: none;
}
a:hover {
	color: #00448f;
	text-decoration: underline;
}
:target { animation: highlight 3s ease; }
@keyframes highlight {
  0% { background-color: #ffa; }
  100% { background-color: #ffffff; }
}

/* TABLES */

table {
	border-collapse: collapse;
	margin: 2rem 0;
	text-align: left;
	width: 100%;
}

tr { border: 1px solid gray; }
th, td { border: 1px solid gray; padding: 0.5rem; }

/* LISTS */

ul, ol {
	padding-left: 1rem;
}
dt {
  font-family: var(--sans);
  font-weight: bold;
  float: left;
  padding: 0 0.5rem 0 0;
  line-height: 1.4;
}
dd {
  padding: 0;
  margin: 1rem 0 1rem 2rem;
}

/* MEDIA */

img {
  max-width: 100%;
}
figure {
  display: flex;
  flex-direction: column;
  align-items: center;
  border: var(--accent-color) 1px solid;
  padding: 15px 10px;
}
figcaption {
  font-size: 0.8rem;
  font-style: italic;
  padding: 1rem 0 0 0;
}

/* ADMONITIONS */

.astuce, .tip, .note, .important {
  position: relative;
  background: rgb(225, 225, 225);
  padding: 30px 10px 3px 10px;
  border-radius: 5px;
  margin: 1.5rem 0;
  font-size: 0.9rem;
}
.astuce::before,
.tip::before,
.note::before,
.important::before {
  content: attr(class);
  position: absolute;
  top: 5px;
  left: 5px;
  font-size: 12px;
  font-family: var(--mono);
}
.astuce, .tip, .note {
	background: rgb(225, 225, 225);
}
.important {
	background: rgb(239,178,178);
}

/* CODE */

code, pre {
	font-family: var(--mono);
}
code {
  display: inline-block;
  font-size: 90%;
}
p code,
ul code,
ol code,
dl code,
table code {
  background-color: var(--code-background-color);
  border-radius: 4px;
  padding: 0 0.2em;
}
pre {
  background-color: var(--code-background-color);
  border: 1px solid var(--code-border-color);
  border-radius: 4px;
  padding-left: 0.5em;
  margin: 1em 0;
  overflow-x: auto;
}

/* ASIDE (TOC) */

aside {
  grid-area: aside;
	position: sticky;
	height: 80vh;
	top: 2em;
	padding-left: 3em;
	font-size: 0.875em;
  font-family: var(--sans);
}
aside ul {
	list-style-type: none;
}
aside > nav > ul > li {
	position: relative;
	padding-bottom: 0.75em;
}
aside .toggle {
	cursor: pointer;
	position: absolute;
	left: -28px;
	top: -2px;
	padding: 2px 10px;
	color: #0056b3;
}

/* FOOTER */

footer {
  grid-area: footer;
}

/* DARK MODE */
/* Inspir√© par Bradley Taunt */
/* https://tdarb.org/lazy-dev-dark-mode/ */

@media (prefers-color-scheme: dark) {
  body {
  	background: #2d2d2d;
  	filter:invert(1);
  }
  a,
  img,
  pre,
  *:not(pre) > code {
  	filter:invert(1);
  }
  aside .toggle {
  	color: #5e421b;
  }
  a {
  	color: #B2CCE8;
  }
  .astuce, .tip, .note {
  	background: #b4b4b4;
  }
  .important {
  	background: #67f3f4;
  }
}
    </style>
</head>

<body>
    <header>
	<article>
		<h1 class="title-site">Cosma ‚Äî Manuel d‚Äôutilisation ‚Äî CLI</h1>
	</article>

</header>

<nav class="nav-lang">
	<ul>
		
<!-- 
		<li><a href="../cosma-user-manual.html">üá¨üáß EN</a></li>
		
		<li><a href="../cosma-manuel-d-utilisation.html">üá´üá∑ FR</a></li>
		
		<li><a href="../cosma-manuel-d-utilisation-cli.html">üá´üá∑ FR</a></li>
 -->
		
		<li><a href="https://cosma.graphlab.fr">cosma.graphlab.fr ‚Ü¶</a></li>
	</ul>
</nav>

    <main>
        
        <p>Derni√®re mise √† jour : 8 novembre 2022</p>
        
        

        <div class="important">
<p>Cette version du manuel correspond √† la version 2.0.0-beta-1 de Cosma CLI uniquement.</p>
</div>
<h2 id="installation-et-mise-a-jour" tabindex="-1">Installation et mise √† jour</h2>
<h3 id="installation" tabindex="-1">Installation</h3>
<p>Cosma CLI est disponible pour macOS, Windows et Linux.</p>
<p>L'installation de <a href="https://nodejs.org/">NodeJS</a> version 16 minimum est requise.</p>
<p>Le gestionnaire de paquets NPM est install√© automatiquement avec NodeJS. NPM peut √™tre utilis√© pour g√©rer l'installation de Cosma CLI. Entrez la commande ci-dessous dans votre terminal pour installer Cosma CLI de mani√®re globale. Le logiciel s'ex√©cute alors en √©crivant <code>cosma</code>.</p>
<pre><code>npm install @graphlab-fr/cosma -g
</code></pre>
<p>Si vous souhaitez installer Cosma CLI comme d√©pendance d'un projet NodeJS, utilisez la commande ci-dessous. Le logiciel s'ex√©cute alors depuis la racine du projet en √©crivant <code>./node_modules/.bin/cosma</code>.</p>
<pre><code>npm install @graphlab-fr/cosma
</code></pre>
<h3 id="mise-a-jour" tabindex="-1">Mise √† jour</h3>
<p>La commande suivante affiche la liste des paquets install√©s via NPM pour lesquels une mise √† jour existe¬†:</p>
<pre><code>npm outdated
</code></pre>
<p>La commande suivante met √† jour Cosma CLI si une mise √† jour existe¬†:</p>
<pre><code>npm update cosma
</code></pre>
<h2 id="presentation" tabindex="-1">Pr√©sentation</h2>
<p>Cosma CLI est la version ligne de commande (<em>command-line interface</em>, CLI) de Cosma, un logiciel qui permet de repr√©senter des graphes documentaires sous forme de r√©seaux interactifs dans une interface web.</p>
<p>Cosma CLI fonctionne sur la base de fichiers de configuration √©crits en YAML. Chaque fichier de configuration indique une source des donn√©es √† utiliser, ainsi que diff√©rents param√®tres qui r√©gissent le comportement de Cosma pour cette source de donn√©es.</p>
<p>Deux approches peuvent √™tre adopt√©es en fonction des besoins¬†:</p>
<p>La premi√®re consiste √† ex√©cuter la commande <code>cosma</code> dans un r√©pertoire o√π se trouve un fichier de configuration. On parle dans ce cas de fichier de configuration local. Les fichiers de configuration locaux doivent toujours √™tre nomm√©s <code>config.yml</code>.</p>
<p>L'autre approche consiste √† ex√©cuter la commande <code>cosma</code> en ajoutant l'option <code>--config &lt;nom&gt;</code>, o√π <code>&lt;nom&gt;</code> correspond au nom d'un fichier de configuration pr√©sent dans un dossier sp√©cial, le r√©pertoire de donn√©es utilisateur. On parle dans ce cas de fichier de configuration global, ou <strong>projet</strong>. Celui-ci peut √™tre nomm√© librement (ex¬†: <code>toto.yml</code>). Cette seconde approche permet d'ex√©cuter la commande <code>cosma</code> depuis n'importe quel emplacement.</p>
<div class="astuce">
<p>La m√©thode locale favorise l'automatisation et la reproductibilit√© dans un contexte de travail partag√© ou distribu√© sur plusieurs machines. Elle permet en effet de transmettre simultan√©ment donn√©es, configuration et instructions d'utilisation (commandes) sous une forme utilisable telle quelle, sans aucun param√©trage suppl√©mentaire requis de la part du destinataire (humain ou machine).</p>
<p>√Ä l'inverse, la m√©thode globale facilite l'utilisation prolong√©e du logiciel par un individu sur une seule machine.</p>
</div>
<h2 id="la-commande-cosma" tabindex="-1">La commande <code>cosma</code></h2>
<p>La commande <code>cosma</code> s'utilise de trois mani√®res¬†:</p>
<ol>
<li><code>cosma</code> affiche l'aide ;</li>
<li><code>cosma &lt;option&gt;</code> ex√©cute une option globale ;</li>
<li><code>cosma &lt;commande&gt; &lt;options&gt;</code> ex√©cute l'une des cinq commandes de Cosma (<code>config</code>, <code>record</code>, <code>autorecord</code>, <code>batch</code> et <code>modelize</code>), avec une ou plusieurs options facultatives.</li>
</ol>
<p>Les cinq commandes existent en version longue et en version courte (ex¬†: <code>cosma config</code> ou <code>cosma c</code>). Certaines options disposent √©galement d'une version courte (ex¬†: <code>cosma config --global</code> ou <code>cosma config -g</code>). Dans les deux cas, version longue et version courte sont fonctionnellement identiques ; la version courte sert simplement √† gagner du temps lors d'une utilisation r√©p√©t√©e et prolong√©e.</p>
<p>Les sous-sections qui suivent d√©taillent les options globales.</p>
<h3 id="creer-le-repertoire-de-donnees-utilisateur" tabindex="-1">Cr√©er le r√©pertoire de donn√©es utilisateur</h3>
<pre><code>cosma --create-user-data-dir
</code></pre>
<p>Cette commande cr√©e un r√©pertoire de donn√©es utilisateur intitul√© <code>cosma-cli</code> √† un emplacement qui respecte la sp√©cification <a href="https://xdgbasedirectoryspecification.com">XDG Base Directory</a>. L'emplacement exact d√©pend de chaque syst√®me d'exploitation et peut varier d'une version √† l'autre d'un m√™me syst√®me.</p>
<p>Si le r√©pertoire de donn√©es utilisateur existe d√©j√†, la commande affiche simplement son emplacement.</p>
<h3 id="afficher-les-projets" tabindex="-1">Afficher les projets</h3>
<pre><code>cosma --list-projects
</code></pre>
<p>Cette commande liste les fichiers de configuration pr√©sents dans le r√©pertoire de donn√©es utilisateur, aussi appel√©s projets.</p>
<h3 id="afficher-le-numero-de-version" tabindex="-1">Afficher le num√©ro de version</h3>
<pre><code>cosma --version
cosma -V
</code></pre>
<h3 id="afficher-laide" tabindex="-1">Afficher l'aide</h3>
<p>Cosma dispose d'une aide g√©n√©rale¬†:</p>
<pre><code>cosma --help
cosma -h
</code></pre>
<p>Une aide contextuelle est √©galement disponible pour les cinq commandes de Cosma. Ajoutez l'option <code>-h/--help</code> √† l'une de ces commandes pour afficher l'aide contextuelle.</p>
<p>Exemple¬†:</p>
<pre><code>cosma config --help
</code></pre>
<h2 id="configuration" tabindex="-1">Configuration</h2>
<h3 id="creer-un-fichier-de-configuration" tabindex="-1">Cr√©er un fichier de configuration</h3>
<pre><code>cosma config
cosma c
</code></pre>
<p>Cette commande cr√©e un fichier <code>config.yml</code> dans le r√©pertoire actuel.</p>
<h3 id="creer-un-fichier-de-configuration-global-(projet)" tabindex="-1">Cr√©er un fichier de configuration global (projet)</h3>
<pre><code>cosma config --global &lt;nom&gt;
cosma c -g &lt;nom&gt;
</code></pre>
<p>L'option <code>-g/--global</code> suivie d'un nom cr√©e un fichier <code>nom.yml</code> dans le r√©pertoire de donn√©es utilisateur.</p>
<h3 id="creer-un-fichier-de-configuration-par-defaut" tabindex="-1">Cr√©er un fichier de configuration par d√©faut</h3>
<pre><code>cosma config --global
cosma c -g
</code></pre>
<p>Lorsqu'elle n'est pas suivie d'un nom, l'option <code>-g/--global</code> cr√©e un fichier <code>defaults.yml</code> dans le r√©pertoire de donn√©es utilisateur. Ce fichier peut √™tre ensuite modifi√© pour d√©finir les valeur par d√©faut des diff√©rents param√®tres de configuration de Cosma. Ces valeurs par d√©faut seront appliqu√©es aux fichiers de configuration cr√©√©s par la suite.</p>
<h3 id="parametres-de-configuration" tabindex="-1">Param√®tres de configuration</h3>
<p>Vous trouverez ci-dessous la liste des param√®tres utilis√©s par Cosma. Si un param√®tre est absent d'un fichier de configuration, Cosma consid√®re qu'il a sa valeur par d√©faut.</p>
<div class="important">
<p>Les types de fiches et de liens ¬´¬†undefined¬†¬ª sont requis pour le fonctionnement de l'application. Si vous les supprimez d'un fichier de configuration, Cosma les r√©-ins√®rera automatiquement lors de la prochaine utilisation de ce fichier.</p>
</div>
<table>
<thead>
<tr>
<th>nom</th>
<th>description</th>
<th>valeurs possibles</th>
<th>valeur par d√©faut</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>select_origin</code></td>
<td>Type de la source de donn√©es</td>
<td><code>directory</code> (r√©pertoire de fiches), <code>csv</code> (fichier de donn√©es tabulaires local) ou <code>online</code> (fichier de donn√©es tabulaires en ligne)</td>
<td><code>directory</code></td>
</tr>
<tr>
<td><code>files_origin</code></td>
<td>Emplacement des fiches pour <code>directory</code></td>
<td>chemin (r√©pertoire)</td>
<td></td>
</tr>
<tr>
<td><code>nodes_origin</code></td>
<td>Emplacement des n≈ìuds pour <code>csv</code></td>
<td>chemin (fichier CSV)</td>
<td></td>
</tr>
<tr>
<td><code>links_origin</code></td>
<td>Emplacement des liens pour <code>csv</code></td>
<td>chemin (fichier CSV)</td>
<td></td>
</tr>
<tr>
<td><code>nodes_online</code></td>
<td>Emplacement des n≈ìuds pour <code>online</code></td>
<td>URL (fichier CSV)</td>
<td></td>
</tr>
<tr>
<td><code>links_online</code></td>
<td>Emplacement des liens pour <code>online</code></td>
<td>URL (fichier CSV)</td>
<td></td>
</tr>
<tr>
<td><code>images_origin</code></td>
<td>Emplacement des images utilis√©es dans le cosmoscope</td>
<td>chemin (r√©pertoire)</td>
<td></td>
</tr>
<tr>
<td><code>export_target</code></td>
<td>Emplacement des exports</td>
<td>chemin (r√©pertoire)</td>
<td></td>
</tr>
<tr>
<td><code>history</code></td>
<td>Copie de chaque cosmoscope g√©n√©r√© via Cosma dans le r√©pertoire <code>history</code></td>
<td><code>true</code> ou <code>false</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>focus_max</code></td>
<td>Distance maximale au n≈ìud s√©lectionn√© en mode focus</td>
<td>nombre entier</td>
<td>2</td>
</tr>
<tr>
<td><code>record_types</code></td>
<td>Liste des types d'entit√©s</td>
<td>liste</td>
<td></td>
</tr>
<tr>
<td>type d'entit√©</td>
<td></td>
<td>cha√Æne de caract√®res</td>
<td></td>
</tr>
<tr>
<td><code>fill</code></td>
<td>Couleur de remplissage du type de n≈ìud</td>
<td>couleur HTML</td>
<td></td>
</tr>
<tr>
<td><code>stroke</code></td>
<td>Couleur du contour du type de n≈ìud (utilis√©e lorsque le n≈ìud est rempli par une image)</td>
<td>couleur HTML</td>
<td></td>
</tr>
<tr>
<td><code>link_types</code></td>
<td>Liste des types de liens</td>
<td>liste</td>
<td></td>
</tr>
<tr>
<td>type de lien</td>
<td></td>
<td>cha√Æne de caract√®res</td>
<td></td>
</tr>
<tr>
<td><code>stroke</code></td>
<td>Style de trac√© du type de lien</td>
<td><code>simple</code> (trait plein), <code>dash</code> (tirets), <code>dash</code> (pointill√©s), <code>double</code> (deux traits parall√®les)</td>
<td><code>simple</code></td>
</tr>
<tr>
<td><code>color</code></td>
<td>Couleur du type de lien</td>
<td>couleur HTML</td>
<td></td>
</tr>
<tr>
<td><code>record_filters</code></td>
<td>Liste de m√©tadonn√©es filtres</td>
<td></td>
<td></td>
</tr>
<tr>
<td>m√©tadonn√©e filtre</td>
<td>Les fiches incluant cette m√©tadonn√©e seront exclues lors de la cr√©ation d'un cosmoscope</td>
<td>type, mot-cl√©, m√©tadonn√©e d√©clar√©e dans <code>record_metas</code></td>
<td></td>
</tr>
<tr>
<td><code>graph_background_color</code></td>
<td>Couleur de fond du graphe</td>
<td>couleur HTML</td>
<td></td>
</tr>
<tr>
<td><code>graph_highlight_color</code></td>
<td>Couleur de surbrillance</td>
<td>couleur HTML</td>
<td></td>
</tr>
<tr>
<td><code>graph_highlight_on_hover</code></td>
<td>Application de la surbrillance au survol et √† la s√©lection des n≈ìuds</td>
<td><code>true</code> ou <code>false</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>graph_text_size</code></td>
<td>Taille des √©tiquettes des n≈ìuds</td>
<td>nombre entier compris entre 5 et 15</td>
<td>10</td>
</tr>
<tr>
<td><code>graph_arrows</code></td>
<td>Ajout de fl√®ches directionnelles aux extr√©mit√©s des liens</td>
<td><code>true</code> ou <code>false</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>node_size_method</code></td>
<td>M√©thode de dimensionnement des n≈ìuds</td>
<td><code>degree</code> (taille proportionnelle au degr√©) ou <code>unique</code> (taille fixe)</td>
<td><code>degree</code></td>
</tr>
<tr>
<td><code>node_size</code></td>
<td>Taille des n≈ìuds (taille fixe)</td>
<td>nombre entier compris entre 2 et 20</td>
<td>10</td>
</tr>
<tr>
<td><code>node_size_max</code></td>
<td>Taille maximale des n≈ìuds (taille proportionnelle)</td>
<td>nombre entier compris entre 2 et 20</td>
<td>20</td>
</tr>
<tr>
<td><code>node_size_min</code></td>
<td>Taille minimale des n≈ìuds (taille proportionnelle)</td>
<td>nombre entier compris entre 2 et 20</td>
<td>2</td>
</tr>
<tr>
<td><code>attraction_force</code></td>
<td>Force d'attraction</td>
<td>nombre compris entre 50 et 600</td>
<td>200</td>
</tr>
<tr>
<td><code>attraction_distance_max</code></td>
<td>Distance maximum entre les n≈ìuds</td>
<td>nombre compris entre 200 et 800</td>
<td>250</td>
</tr>
<tr>
<td><code>attraction_vertical</code></td>
<td>Force d'attraction vers l'axe vertical</td>
<td>nombre compris entre 0 (d√©sactiv√©) et 1</td>
<td>0</td>
</tr>
<tr>
<td><code>attraction_horizontal</code></td>
<td>Force d'attraction vers l'axe horizontal</td>
<td>nombre compris entre 0 (d√©sactiv√©) et 1</td>
<td>0</td>
</tr>
<tr>
<td><code>views</code></td>
<td>Liste des vues enregistr√©es (GUI)</td>
<td>liste</td>
<td></td>
</tr>
<tr>
<td><code>chronological_record_meta</code></td>
<td>M√©tadonn√©e utilis√©e pour le mode chronologique</td>
<td>m√©tadonn√©e d√©clar√©e dans <code>record_metas</code></td>
<td><code>last_edit</code></td>
</tr>
<tr>
<td><code>record_metas</code></td>
<td>Liste de m√©tadonn√©es (pr√©sentes dans la source de donn√©es) √† inclure dans le cosmoscope</td>
<td>liste</td>
<td></td>
</tr>
<tr>
<td><code>title</code></td>
<td>Titre du cosmoscope</td>
<td>cha√Æne de caract√®res</td>
<td></td>
</tr>
<tr>
<td><code>author</code></td>
<td>Auteur du cosmoscope</td>
<td>cha√Æne de caract√®res</td>
<td></td>
</tr>
<tr>
<td><code>description</code></td>
<td>Decription du cosmoscope</td>
<td>cha√Æne de caract√®res</td>
<td></td>
</tr>
<tr>
<td><code>keywords</code></td>
<td>Liste de mots-cl√©s du cosmoscope</td>
<td>liste</td>
<td></td>
</tr>
<tr>
<td>mot-cl√©</td>
<td></td>
<td>cha√Æne de caract√®res</td>
<td></td>
</tr>
<tr>
<td><code>link_symbol</code></td>
<td>Symbole √† afficher en remplacement des identifiants comme texte des liens internes dans le cosmoscope</td>
<td>cha√Æne de caract√®res</td>
<td></td>
</tr>
<tr>
<td><code>csl</code></td>
<td>Style bibliographique</td>
<td>chemin (fichier XML)</td>
<td></td>
</tr>
<tr>
<td><code>bibliography</code></td>
<td>Donn√©es bibliographiques</td>
<td>chemin (fichier JSON)</td>
<td></td>
</tr>
<tr>
<td><code>csl_locale</code></td>
<td>Localisation bibliographique</td>
<td>chemin (fichier XML)</td>
<td></td>
</tr>
<tr>
<td><code>css_custom</code></td>
<td>Feuille de styles CSS pour la personnalisation du cosmoscope</td>
<td>chemin (fichier CSS)</td>
<td></td>
</tr>
<tr>
<td><code>devtools</code></td>
<td>Affichage des outils de d√©veloppement (GUI)</td>
<td><code>true</code> ou <code>false</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>lang</code></td>
<td>Langue du cosmoscope</td>
<td><code>en</code> (anglais) ou <code>fr</code> (fran√ßais)</td>
<td><code>en</code></td>
</tr>
</tbody>
</table>
<div class="astuce">
<p>La couleur de fond du graphe et la couleur de surbrillance sont modifiables directement via le fichier de configuration mais toutes les couleurs de l'interface peuvent √™tre modifi√©es en utilisant une feuille de style CSS personnalis√©e.</p>
<p>Appliquer une force verticale/horizontale resserre le graphe et permet de ramener plus pr√®s du centre les n≈ìuds isol√©s.</p>
</div>
<h3 id="modele-de-configuration" tabindex="-1">Mod√®le de configuration</h3>
<p>Voici le mod√®le utilis√© par Cosma pour g√©n√©rer un fichier de configuration¬†:</p>
<pre><code>select_origin: directory
files_origin: ''
nodes_origin: ''
links_origin: ''
nodes_online: ''
links_online: ''
images_origin: ''
export_target: ''
history: true
focus_max: 2
record_types:
  undefined:
    fill: '#858585'
    stroke: '#858585'
link_types:
  undefined:
    stroke: simple
    color: '#e1e1e1'
record_filters: []
graph_background_color: '#ffffff'
graph_highlight_color: '#ff6a6a'
graph_highlight_on_hover: true
graph_text_size: 10
graph_arrows: true
node_size_method: degree
node_size: 10
node_size_max: 20
node_size_min: 2
attraction_force: 200
attraction_distance_max: 250
attraction_vertical: 0
attraction_horizontal: 0
views: {}
chronological_record_meta: last_edit
record_metas: []
title: ''
author: ''
description: ''
keywords: []
link_symbol: ''
csl: ''
bibliography: ''
csl_locale: ''
css_custom: ''
devtools: false
lang: en
</code></pre>
<h2 id="creer-du-contenu-donnees-tabulaires-(csv)" tabindex="-1">Cr√©er du contenu¬†: donn√©es tabulaires (CSV)</h2>
<h2 id="creer-du-contenu-fichiers-texte-(markdown)" tabindex="-1">Cr√©er du contenu¬†: fichiers texte (Markdown)</h2>
<p>Lorsque la source de donn√©es est de type <code>directory</code> (r√©pertoire de fichiers Markdown), les donn√©es doivent respecter les r√®gles suivantes¬†:</p>
<ul>
<li>contenu r√©dig√© en Markdown, extension de fichier <code>.md</code>¬†;</li>
<li>m√©tadonn√©es exprim√©es en YAML, dans un en-t√™te pr√©sent en d√©but de fichier¬†;</li>
<li>liens internes exprim√©s avec une syntaxe de type wiki (doubles crochets <code>[[ ]]</code>) et bas√©s sur des identifiants uniques num√©riques (suite unique de chiffres).</li>
</ul>
<p>Les sous-sections qui suivent expliquent ces r√®gles en d√©tail.</p>
<div class="note">
<p>Cette combinaison de normes d'√©criture correspond au croisement de plusieurs cultures textuelles¬†: la documentation (enrichir et indexer le contenu avec des m√©tadonn√©es)¬†; les wikis (interrelier des connaissances)¬†; la m√©thode Zettelkasten (organiser ses notes)¬†; l'√©criture acad√©mique avec Pandoc (utiliser le format texte comme source pour plusieurs autres formats).</p>
<p>Cosma fonctionne donc particuli√®rement bien lorsqu'il est utilis√© en tandem avec des environnements d'√©criture qui adoptent √©galement cette approche, comme <a href="https://zettlr.com">Zettlr</a> ou l'extension <a href="https://foambubble.github.io/foam/">Foam</a> pour Visual Studio Code et VSCodium.</p>
</div>
<h3 id="metadonnees" tabindex="-1">M√©tadonn√©es</h3>
<p>Pour √™tre correctement interpr√©t√©s par Cosma, les fichiers Markdown (<code>.md</code>) doivent respecter une certaine structure, et notamment la pr√©sence d'un en-t√™te en <a href="http://yaml.org">YAML</a> au d√©but du fichier. Cet en-t√™te est cr√©√© automatiquement lorsque la fiche est cr√©√©e via Cosma.</p>
<p>Exemple¬†:</p>
<pre><code>---
title: Titre du document
id: 20201209111625
type:
- undefined
tags:
- mot-cl√© 1
- mot-cl√© 2
---
</code></pre>
<p>L'en-t√™te YAML est d√©limit√© par deux s√©ries de trois tirets seuls sur une ligne (<code>---</code>). Un champ en YAML est compos√© d'un nom et d'une valeur s√©par√©s par un double-points.</p>
<p>Conform√©ment √† la sp√©cification YAML, les listes peuvent √™tre inscrite en mode <em>block</em>¬†:</p>
<pre><code class="language-yaml">tags:
- mot-cl√© 1
- mot-cl√© 2
</code></pre>
<p>Ou bien en mode <em>flow</em>¬†:</p>
<pre><code class="language-yaml">tags: [mot-cl√© 1, mot-cl√© 2]
</code></pre>
<div class="note">
<p><strong>Pourquoi un en-t√™te en YAML¬†?</strong></p>
<p>Certains logiciels identifier les m√©tadonn√©es d'un fichier de mani√®re heuristique. Par exemple, si la premi√®re ligne du fichier est un titre de niveau 1, alors il sera interpr√©t√© comme le titre du fichier¬†; si la seconde ligne contient des mots pr√©fix√©s par un croisillon <code>#</code>, alors ils seront interpr√©t√©s comme des mots-cl√©s.</p>
<p>L'inconv√©nient de ce fonctionnement est qu'il n'est pas interop√©rable¬†: chaque logiciel a ses propres conventions, ce qui limite la capacit√© de l'utilisateur √† changer d'outil.</p>
<p>Utiliser un en-t√™te en YAML permet de d√©clarer des m√©tadonn√©es comme le titre et l'identifiant unique d'une fiche de mani√®re explicite. Ceci pr√©sente l'avantage de rendre triviale la d√©tection et la manipulation de ces m√©tadonn√©es, aussi bien par une machine que par un humain. L'utilisation d'un format commun (comme YAML) augmente le nombre d'outils compatibles avec un m√™me ensemble de fichiers. Et des outils informatiques tr√®s r√©pandus comme les expressions r√©guli√®res et les scripts <em>shell</em> permettent aux utilisateurs de convertir eux-m√™mes leurs donn√©es de mani√®re relativement simple si besoin.</p>
</div>
<h4 id="metadonnees-reconnues" tabindex="-1">M√©tadonn√©es reconnues</h4>
<p>Cosma reconna√Æt et utilise les champs suivants¬†:</p>
<dl>
<dt><code>title</code></dt>
<dd>Obligatoire.</dd>
<dd>Titre de la fiche.</dd>
<dt><code>id</code></dt>
<dd>Obligatoire.</dd>
<dd>Identifiant unique de la fiche (s√©rie unique de chiffres). Par d√©faut, Cosma g√©n√®re des identifiants √† 14 chiffres par horodatage (ann√©e, mois, jour, heures, minutes et secondes) sur le mod√®le de certains logiciels de prise de notes type Zettelkasten comme <a href="https://zettelkasten.de/the-archive/">The Archive</a> ou <a href="https://www.zettlr.com">Zettlr</a>.</dd>
<dt><code>type</code></dt>
<dd>Types de la fiche. Facultatif. Une fiche peut avoir un ou plusieurs types. Si le champ n'est pas renseign√© ou bien que ses valeurs ne correspondent pas √† l'un des types renseign√©s dans la configuration, Cosma interpr√®tera le type de la fiche comme non d√©fini (<code>undefined</code>).</dd>
<dt><code>tags</code> (ou <code>keywords</code>)</dt>
<dd>Mots-cl√©s de la fiche. Facultatif. La valeur doit √™tre une liste. Il est possible d'utiliser <code>keywords</code> au lieu de <code>tags</code>, dans une logique de compatibilit√© avec Pandoc. Si une fiche comporte un champ <code>tags</code> et un champ <code>keywords</code>, seuls les mots-cl√©s d√©clar√©s dans le champ <code>tags</code> sont interpr√©t√©s par Cosma.</dd>
</dl>
<!-- Compl√©ter : thumbnail, begin, end‚Ä¶ ? -->
<h4 id="ajouter-dautres-metadonnees" tabindex="-1">Ajouter d'autres m√©tadonn√©es</h4>
<p>Il est possible d'ajouter librement d'autres m√©tadonn√©es dans l'en-t√™te YAML. Par d√©faut, Cosma ignore ces m√©tadonn√©es au moment de cr√©er un cosmoscope¬†: elles ne sont pas incluses dans le rendu HTML des fiches. Pour que ces m√©tadonn√©es soient prises en compte, inscrivez-les dans le fichier de configuration au niveau du champ <code>record_metas</code>.</p>
<p>Exemple¬†:</p>
<pre><code>record_metas: [author, date, lang]
</code></pre>
<h3 id="contenu" tabindex="-1">Contenu</h3>
<p>Cosma interpr√®te les fichiers comme √©tant r√©dig√©s en <a href="https://spec.commonmark.org/0.30/">CommonMark</a>, une version strictement d√©finie du langage de balisage l√©ger Markdown.</p>
<div class="astuce">
<p>Le <a href="https://www.arthurperret.fr/tutomd/">tutoriel CommonMark traduit en fran√ßais</a> permet d'apprendre les bases de Markdown en 10 minutes.</p>
<p>Si vous souhaitez d√©couvrir l'utilisation conjointe de Markdown et Pandoc, vous pouvez consulter le cours en ligne <a href="https://infolit.be/md/">Markdown et vous</a>.</p>
</div>
<p>Cosma g√©n√®re un rendu des fichiers Markdown en HTML. Par cons√©quent, les fichiers Markdown peuvent √©galement inclure du code HTML, ainsi que des images vectorielles en SVG. Cosma supporte √©galement l'<a href="https://www.npmjs.com/package/markdown-it-attrs">ajout d'attributs via des accolades</a>, comme pr√©sent√© ci-dessous.</p>
<pre><code class="language-markdown">Ce paragraphe sera en rouge{.red}
</code></pre>
<pre><code class="language-html">&lt;div class=&quot;red&quot;&gt;Ce paragraphe sera en rouge&lt;/div&gt;
</code></pre>
<p>Les images au format JPG ou PNG peuvent √™tre incluses dans le cosmoscope via la syntaxe Markdown. Exemple¬†:</p>
<pre><code class="language-markdown">![Texte alternatif](image.jpg)
</code></pre>
<p>Pour r√©duire la taille du cosmoscope, privil√©giez les images h√©berg√©es sur le Web et incluses via une URL. Exemple¬†:</p>
<pre><code class="language-markdown">![Texte alternatif](http://domaine.fr/image.jpg)
</code></pre>
<h3 id="liens" tabindex="-1">Liens</h3>
<p>√Ä l'int√©rieur des fiches, vous pouvez cr√©er des liens avec l'identifiant de la fiche cible entre double crochets.</p>
<p>Exemple¬†:</p>
<pre><code>Un lien vers [[20201209111625]] une fiche.
</code></pre>
<p>Cosma permet de d√©finir des types de liens. Chaque type de lien est caract√©ris√© par un nom, une couleur et un trac√©. Pour qualifier un lien dans une fiche, pr√©fixez l'identifiant par le nom d'un type de lien suivi d'un deux-points.</p>
<p>Exemple¬†:</p>
<pre><code>Le concept B d√©rive du [[g√©n√©rique:20201209111625]] concept A.

La personne D a √©crit contre [[opposant:20201209111625]] la personne C.
</code></pre>
<div class="astuce">
<p>Pour am√©liorer la lisibilit√© des fiches dans le cosmoscope, utilisez le param√®tre <code>link_symbol</code>. Il accepte comme valeur une cha√Æne de caract√®res Unicode arbitraire, qui remplacera les identifiants entre les crochets dans le rendu HTML des fiches. Ceci permet d'all√©ger visuellement le texte des fiches en rempla√ßant les longs identifiants num√©riques par une convention personnelle. Cela peut √™tre par exemple un symbole comme une manicule ‚òû, une fl√®che ‚Üí, une √©toile ‚ü°, etc.</p>
</div>
<h3 id="identifiants-uniques" tabindex="-1">Identifiants uniques</h3>
<p>Pour √™tre correctement interpr√©t√©e par Cosma, chaque fiche doit avoir un identifiant unique. Cet identifiant sert de cible aux liens internes.</p>
<p><strong>L'identifiant doit √™tre une suite de chiffres.</strong></p>
<p>Par d√©faut, Cosma g√©n√®re des identifiants √† 14 chiffres par horodatage (ann√©e, mois, jour, heures, minutes et secondes). Nous nous inspirons ici du fonctionnement de logiciels de prise de notes type Zettelkasten comme <a href="https://zettelkasten.de/the-archive/">The Archive</a> et <a href="https://www.zettlr.com">Zettlr</a>.</p>
<p>√Ä terme, nous souhaitons permettre √† l'utilisateur de d√©finir un motif d'identifiant de son choix, √† la mani√®re de Zettlr.</p>
<div class="note">
<p>De nombreux logiciels de prise de notes interreli√©es proposent d'√©tablir les liens entre fichiers via leurs noms, et de g√©rer automatiquement la maintenance des liens lorsque les noms de fichiers sont modifi√©s. En choisissant plut√¥t d'utiliser des identifiants uniques, nous avons donn√© √† Cosma un fonctionnement plus classique, plus strict, proche de celui du Web. Nous pensons qu'il s'agit de la mani√®re la plus simple d'√©viter les <a href="https://fr.wikipedia.org/wiki/Lien_mort">liens morts</a> de fa√ßon p√©renne. Le fait de ne pas recourir √† une maintenance automatique des liens notamment rend les donn√©es moins d√©pendantes d'une solution logicielle en particulier.</p>
</div>
<h2 id="creer-des-fiches" tabindex="-1">Cr√©er des fiches</h2>
<div class="important">
<p>Pour cr√©er des fiches, il faut un fichier de configuration avec le param√®tre <code>files_origin</code> correctement renseign√©.</p>
</div>
<h3 id="record-creer-une-fiche-(mode-formulaire)" tabindex="-1"><code>record</code> : cr√©er une fiche (mode formulaire)</h3>
<pre><code>cosma record
cosma r
</code></pre>
<p>Cette commande permet de cr√©er une fiche √† la mani√®re d'un formulaire. Une fois la commande lanc√©e, le logiciel demande successivement de saisir un titre, un ou plusieurs types, et un ou plusieurs mots cl√©s. Seul le titre est obligatoire.</p>
<h3 id="autorecord-creer-une-fiche-(mode-one-liner)" tabindex="-1"><code>autorecord</code> : cr√©er une fiche (mode <em>one-liner</em>)</h3>
<pre><code>cosma autorecord &lt;titre&gt; &lt;type&gt; &lt;mots-cl√©s&gt;
cosma a &lt;titre&gt; &lt;type&gt; &lt;mots-cl√©s&gt;
</code></pre>
<p>Cette commande permet de cr√©er une fiche en une seule saisie. Seul le titre est obligatoire. Si vous saisissez plusieurs types ou plusieurs mots-cl√©s, s√©parez-les par des virgules (les espaces suivant la virgule sont ignor√©s). Exemple¬†: <code>type A, type B</code>, <code>mot-cl√©1, mot-cl√©2</code>.</p>
<h3 id="batch-creer-un-lot-de-fiches" tabindex="-1"><code>batch</code> : cr√©er un lot de fiches</h3>
<pre><code>cosma batch &lt;chemin&gt;
cosma b &lt;chemin&gt;
</code></pre>
<p>Cette commande permet de cr√©er plusieurs fiches d'un coup. <code>&lt;chemin&gt;</code> correspond √† l'emplacement d'un fichier au format JSON ou CSV d√©crivant les fiches √† cr√©er. Comme pour tous les autres modes de cr√©ation de fiches, le titre (<code>title</code>) est obligatoire et les autres champs sont facultatifs.</p>
<p>Exemple de fichier JSON contenant deux fiches¬†:</p>
<pre><code class="language-json">[
  {
    &quot;title&quot;: &quot;Titre de la fiche&quot;
  },
  {
    &quot;title&quot;: &quot;Paul Otlet&quot;,
    &quot;type&quot; : [&quot;Personne&quot;, &quot;Histoire&quot;],
    &quot;metas&quot;: {
        &quot;prenom&quot; : &quot;Paul&quot;,
        &quot;nom&quot; : &quot;Otlet&quot;
    },
    &quot;tags&quot; : [&quot;documentation&quot;],
    &quot;begin&quot; : &quot;1868&quot;,
    &quot;end&quot; : &quot;1944&quot;,
    &quot;content&quot; : &quot;Lorem...&quot;,
    &quot;thumbnail&quot; : &quot;image.jpg&quot;,
    &quot;references&quot; : [&quot;otlet1934&quot;]
  }
]
</code></pre>
<p>Exemple de fichier CSV contenant ces m√™mes fiches¬†:</p>
<pre><code class="language-csv">title,content,type:nature,type:field,meta:prenom,meta:nom,tag:genre,time:begin,time:end,thumbnail,references
Titre de la fiche,,,,,,,,,,,
Paul Otlet,Lorem...,Personne,Histoire,Paul,Otlet,homme,1868,1944,image.png,otlet1934
</code></pre>
<div class="note">
<p><strong>Identifiants des fiches cr√©√©es par lot</strong></p>
<p>Cosma g√©n√®re des identifiants √† 14 chiffres par horodatage¬†: ann√©e, mois, jour, heures, minutes et secondes. Par cons√©quent, il est possible de cr√©er manuellement une fiche par seconde, soit 86¬†400 fiches par jour. Ceci signifie qu'il existe une plage de 86¬†400 identifiants ¬´¬†r√©serv√©s¬†¬ª √† la cr√©ation manuelle de fiches. Pour le 15 janvier 2022 par exemple, ces identifiants vont de 20220115000000 √† 20220115235959.</p>
<p>Pour conserver ce fonctionnement sans risquer de g√©n√©rer des identifiants en double, le mode de cr√©ation par lots g√©n√®re des identifiants par pseudo-horodatage. Les 8 premiers chiffres, correspondant √† la date (ann√©e, mois, jour), sont r√©els. Exemple¬†: 20220115 (15 janvier 2022). En revanche, ceux correspondant aux heures, minutes et secondes sont g√©n√©r√©s en dehors des plages horaires r√©elles. Exemple¬†: 256495. Comme il est impossible de cr√©er une fiche manuellement √† 25h 64min et 95s, il n'y a pas de risque de g√©n√©rer des identifiants en double en utilisant simultan√©ment les deux m√©thodes.</p>
<p>Du fait de ce fonctionnement, il est possible de cr√©er par lot jusqu'√† 913¬†599 fiches par jour et par r√©pertoire avant d'√™tre √† cours d'identifiants.</p>
</div>
<h2 id="modelize-creer-un-cosmoscope" tabindex="-1"><code>modelize</code> : cr√©er un cosmoscope</h2>
<pre><code>cosma modelize
cosma m
</code></pre>
<h3 id="generer-un-cosmoscope-dexemple" tabindex="-1">G√©n√©rer un cosmoscope d'exemple</h3>
<pre><code>cosma modelize --sample
</code></pre>
<p>Cette commande permet de g√©n√©rer un cosmoscope d'exemple. Ceci ne requiert pas de fichier de configuration. Le cosmoscope contient un extrait du manuel d'utilisation de Cosma sous forme hypertextuelle.</p>
<h3 id="traiter-les-citations" tabindex="-1">Traiter les citations</h3>
<pre><code>cosma modelize --citeproc
</code></pre>
<p>Cosma int√®gre une fonctionnalit√© de traitement des citations. Elle repose sur le m√™me √©cosyst√®me que <a href="https://www.zettlr.com">Zettlr</a>¬†: les donn√©es et styles bibliographiques utilisent la norme <a href="https://citationstyles.org">Citation Style Language (CSL)</a>, tandis que l'insertion des citations dans le texte se fait avec la <a href="https://pandoc.org/MANUAL.html#citation-syntax">syntaxe de citation de Pandoc</a>.</p>
<h4 id="fichiers-requis" tabindex="-1">Fichiers requis</h4>
<p>Pour traiter automatiquement les citations, Cosma requiert trois fichiers¬†:</p>
<dl>
<dt>Donn√©es bibliographiques</dt>
<dd>Fichier contenant les m√©tadonn√©es d√©crivant des r√©f√©rences bibliographiques. Le format requis est CSL JSON (extension <code>.json</code>).</dd>
<dt>Style bibliographique</dt>
<dd>Fichier contenant les r√®gles de mise en forme des citations et bibliographies. Le format requis est CSL (extension <code>.csl</code>). Vous pouvez t√©l√©charger des fichiers de style depuis le <a href="https://www.zotero.org/styles">r√©pertoire de styles CSL de Zotero</a>.</dd>
<dt>Localisation bibliographique</dt>
<dd>Fichier contenant les traductions dans une certaine langue des termes employ√©s en bibliographie (ex¬†: √©diteur, num√©ro‚Ä¶). Le format requis est XML (extension <code>.xml</code>). Vous pouvez t√©l√©charger des fichiers de localisation depuis le <a href="https://github.com/citation-style-language/locales/tree/6b0cb4689127a69852f48608b6d1a879900f418b">d√©p√¥t GitHub du projet CSL</a>.</dd>
</dl>
<p>Dans le fichier de donn√©es, chaque r√©f√©rence doit poss√©der un identifiant unique (<code>id</code>) qui sert de cl√© de citation. Exemple¬†:</p>
<pre><code class="language-json">[
  {
    &quot;id&quot;:&quot;goody1979&quot;,
    &quot;author&quot;:[{&quot;family&quot;:&quot;Goody&quot;,&quot;given&quot;:&quot;Jack&quot;}],
    &quot;citation-key&quot;:&quot;goody1979&quot;,
    &quot;event-place&quot;:&quot;Paris&quot;,
    &quot;ISBN&quot;:&quot;978-2-7073-0240-3&quot;,
    &quot;issued&quot;:{&quot;date-parts&quot;:[[1979]]},
    &quot;language&quot;:&quot;fr&quot;,
    &quot;publisher&quot;:&quot;Les Editions de Minuit&quot;,
    &quot;publisher-place&quot;:&quot;Paris&quot;,
    &quot;title&quot;:&quot;La Raison graphique¬†: la domestication de la pens√©e sauvage&quot;,
    &quot;title-short&quot;:&quot;La Raison graphique&quot;,
    &quot;type&quot;:&quot;book&quot;
  }
]
</code></pre>
<div class="astuce">
<p>Vous pouvez utiliser le gestionnaire de r√©f√©rences bibliographiques <a href="https://www.zotero.org/">Zotero</a> avec l'extension <a href="https://retorque.re/zotero-better-bibtex/">Better BibTeX</a> afin de cr√©er des cl√©s de citation uniques pour chaque r√©f√©rence ainsi que des exports automatiquement mis √† jour.</p>
</div>
<h4 id="syntaxe-de-citation" tabindex="-1">Syntaxe de citation</h4>
<p>Pour citer une r√©f√©rence dans une fiche, int√©grez la cl√© de citation de cette r√©f√©rence en utilisant la <a href="https://pandoc.org/MANUAL.html#citation-syntax">syntaxe de citation de Pandoc</a>.</p>
<p>Exemple¬†:</p>
<pre><code>√Ä propos de raison graphique [@goody1979, 46-52]‚Ä¶
</code></pre>
<h4 id="rendu-des-citations-et-bibliographies" tabindex="-1">Rendu des citations et bibliographies</h4>
<p>Lors du traitement des citations, chaque cl√© de citation est remplac√©e par du texte format√© et une bibliographie est g√©n√©r√©e en-dessous du corps de chaque fiche contenant des r√©f√©rences.</p>
<p>Exemple¬†:</p>
<pre><code>√Ä propos de raison graphique (Goody 1979, p.¬†46-52)‚Ä¶

Bibliographie
-------------

GOODY, Jack, 1979. La Raison graphique‚ÄØ: la domestication de la pens√©e sauvage.
  Paris¬†: Les Editions de Minuit. ISBN 978-2-7073-0240-3.
</code></pre>
<p>Les donn√©es CSL JSON correspondant aux r√©f√©rences cit√©es sont √©galement incluses dans le cosmoscope au format JSON. Vous pouvez consulter et t√©l√©charger ces donn√©es dans le cosmoscope en cliquant sur le bouton ¬´¬†Donn√©es¬†¬ª en bas du menu lat√©ral gauche. Vous pouvez √©galement y acc√©der en consultant le code source du cosmoscope au niveau de la balise <code>&lt;article id=&quot;citation-references&quot;&gt;</code>.</p>
<h3 id="appliquer-une-css-personnalisee" tabindex="-1">Appliquer une CSS personnalis√©e</h3>
<pre><code>cosma modelize --custom-css
</code></pre>
<p>Il est possible de personnaliser l'apparence d'un cosmoscope via une feuille de styles CSS. Pour cela, renseignez son emplacement au niveau du param√®tre <code>css_custom</code> dans le fichier de configuration et appliquez l'option <code>--custom-css</code> au moment de g√©n√©rer le cosmoscope.</p>
<p>Pour √©laborer votre CSS, ouvrez le cosmoscope dans un navigateur web et utiliser les outils de d√©veloppement du navigateur pour inspecter le code, ou bien consultez le code source de Cosma, sp√©cifiquement <code>/cosma-core/template.njk</code> (pour conna√Ætre la structure HTML du cosmoscope), <code>/cosma-core/styles.css</code> et <code>/cosma-core/print.css</code> (pour les styles d'impression activ√©s lors de l'impression d'une fiche). Ceci vous permettra de conna√Ætre les s√©lecteurs √† utiliser pour telle ou telle d√©claration CSS.</p>
<p>Les feuilles de style du cosmoscope utilisent des variables CSS pour d√©finir les couleurs et les polices utilis√©es. Vous pouvez red√©finir uniquement ces variables pour modifier tous les √©l√©ments d'interface auxquels elles s'appliquent. Dans l'exemple ci-dessous, le fichier <code>custom.css</code> contient des d√©clarations qui modifient les polices utilis√©es dans le cosmoscope¬†:</p>
<pre><code class="language-css">:root {
  --sans: &quot;IBM Plex Sans&quot;, sans-serif;
  --serif: &quot;IBM Plex Serif&quot;, serif;
  --mono: &quot;IBM Plex Mono&quot;, monospace;
  --condensed: 'Avenir Next Condensed', sans-serif;
}
</code></pre>
<div class="astuce">
<p>Les options peuvent √™tre utilis√©es simultan√©ment¬†:</p>
<pre><code>cosma modelize --citeproc --custom-css
</code></pre>
</div>
<h3 id="utiliser-un-fichier-de-configuration-global" tabindex="-1">Utiliser un fichier de configuration global</h3>
<pre><code>cosma modelize --config &lt;nom&gt;
</code></pre>
<p>L'option <code>--config</code> applique les param√®tres du projet <code>nom</code>.</p>
<h3 id="exclure-certaines-fiches-du-cosmoscope" tabindex="-1">Exclure certaines fiches du cosmoscope</h3>
<p>Il est possible d'exclure certaines fiches du cosmoscope sur la base du param√®tre <code>record_filters</code>. Celui-ci prend pour valeur une liste dont les √©l√©ments peuvent √™tre des types, des mots-cl√©s ou des valeurs prises par les m√©tadonn√©es d√©clar√©es dans <code>record_metas</code>. Les fiches dont l'en-t√™te contient au moins un √©l√©ment de la liste sont exclues au moment de g√©n√©rer le cosmoscope.</p>
<p>Voici un exemple d'en-t√™te d'une fiche¬†:</p>
<pre><code>---
title: Paul Otlet
type: personne
groupe: auteurs
tags: [documentation, pacifisme]
---

Paul Otlet (1868-1944) est un avocat, bibliographe
et militant pacifiste belge consid√©r√© comme le
fondateur de la documentation moderne‚Ä¶
</code></pre>
<p>La m√©tadonn√©e <code>groupe</code> peut √™tre d√©clar√©e via <code>record_metas</code>¬†:</p>
<pre><code>record_metas: [groupe]
</code></pre>
<p>Ceci permet de l'utiliser pour exclure certaines fiches via <code>record_filters</code>. Ici, toutes les fiches contenant <code>groupe: auteurs</code> et/ou le mot-cl√© <code>pacifisme</code> seront exclues¬†:</p>
<pre><code>record_filters: [auteurs, pacifisme]
</code></pre>
<h3 id="historique" tabindex="-1">Historique</h3>
<p>Par d√©faut, Cosma exporte automatiquement une copie de chaque cosmoscope dans un r√©pertoire <code>history</code>. Ceci peut √™tre d√©sactiv√© en renseignant <code>history: false</code> dans le fichier de configuration.</p>
<!-- Emplacement ? -->
<h3 id="rapport-derreurs" tabindex="-1">Rapport d'erreurs</h3>
<p>Si Cosma rencontre des probl√®mes durant la g√©n√©ration d'un cosmoscope, il cr√©e un rapport d'erreurs dans un sous-r√©pertoire <code>reports</code> du r√©pertoire de donn√©es utilisateur. Si ce dernier n'existe pas, <code>reports</code> est plac√© dans le r√©pertoire d'installation de Cosma.</p>
<h2 id="utilisation-du-cosmoscope" tabindex="-1">Utilisation du cosmoscope</h2>
<p>Le cosmoscope est un fichier HTML. Pour l'utiliser, ouvrez-le dans un navigateur web.</p>
<p>Le cosmoscope est organis√© en trois colonnes¬†:</p>
<dl>
<dt>Panneau lat√©ral gauche (Menu)</dt>
<dd>Regroupe les fonctionnalit√©s permettant de chercher de l'information et de modifier l'affichage de mani√®re globale.</dd>
<dt>Zone centrale (Graphe)</dt>
<dd>Affiche le graphe et les contr√¥les associ√©s (zoom, focus).</dd>
<dt>Panneau lat√©ral droit (Fiche)</dt>
<dd>Affiche les fiches (m√©tadonn√©es et contenu) ainsi qu'une liste des liens sortants (Liens) et entrants (R√©troliens).</dd>
</dl>
<h3 id="graphe" tabindex="-1">Graphe</h3>
<p>Le graphe situ√© dans la zone centrale de l'interface affiche des n≈ìuds √©tiquet√©s et interreli√©s. Chaque n≈ìud correspond √† une fiche¬†; l'√©tiquette correspond au titre de la fiche. Les liens correspondent aux liens √©tablis entre les fiches via leur identifiant.</p>
<p>Survoler un n≈ìud le met temporairement en surbrillance, lui et ses connexions. Cliquer sur un n≈ìud le met en surbrillance, ainsi que ses connexions, et ouvre la fiche correspondante.</p>
<p>Vous pouvez zoomer librement dans le graphe √† la souris, au pav√© tactile, en double cliquant sur le fond du graphe ou bien avec les boutons d√©di√©s situ√©s en bas √† gauche. Appuyez sur la touche <code>C</code> pour zoomer sur un n≈ìud s√©lectionn√© (dont la fiche est ouverte). Le bouton Recentrer (raccourci¬†: touche <code>R</code>) r√©initialise le zoom.</p>
<p>Les n≈ìuds sont organis√©s dans l'espace par un algorithme de simulation de forces. Une barre color√©e situ√©e au sommet du panneau lat√©ral gauche t√©moigne de l'√©tat de la simulation (en cours ou bien termin√©e). Cliquez sur cette barre (raccourci¬†: touche <code>Espace</code>) pour lancer un cycle de simulation suppl√©mentaire.</p>
<div class="astuce">
<p>Quelques pressions successives de la touche <code>Espace</code> permettent de ¬´¬†d√©plier¬†¬ª progressivement un graphe emm√™l√©.</p>
</div>
<p>Le graphe n'est pas fig√©, les n≈ìuds peuvent donc √™tre d√©plac√©s par cliquer-glisser. Cependant, les n≈ìuds et liens restent soumis en permanence √† la simulation, donc il n'est pas possible de les disposer manuellement de mani√®re arbitraire. Chaque modification du cosmoscope est susceptible de modifier la disposition des n≈ìuds dans l'espace.</p>
<p>L'affichage du graphe peut √™tre modifi√© de mani√®re temporaire via les contr√¥les plac√©s sous Param√®tres du graphe dans le panneau lat√©ral gauche. Pour modifier l'affichage de mani√®re permanente, modifiez les valeurs par d√©faut des param√®tres correspondants dans le fichier de configuration.</p>
<div class="astuce">
<p>Modifiez la force et la distance maximale entre les n≈ìuds pour adapter l'affichage √† la r√©solution et la taille de votre √©cran. Ajoutez une force d'attraction vers l'axe vertical/horizontal pour resserrer le graphe et ramener les n≈ìuds isol√©s plus pr√®s du centre.</p>
</div>
<p>L'affichage est possible sur tous types d'√©crans mais n'est pas optimis√© pour les terminaux mobiles¬†: le tactile ne donne pas acc√®s √† certaines interactions comme le survol, et les petits √©crans restreignent l'utilit√© du graphe.</p>
<h3 id="fiches" tabindex="-1">Fiches</h3>
<p>Les fiches peuvent √™tre ouvertes en cliquant sur un n≈ìud, une entr√©e de l'index, une suggestion du moteur de recherche, ou un lien dans le corps ou le pied d'une fiche. Ouvrir une fiche affiche son contenu dans le panneau lat√©ral droit.</p>
<p>Ouvrir une fiche met √† jour l'URL de la page dans le navigateur. Ceci permet de naviguer entre les fiches visit√©es via les fonctionnalit√©s Pr√©c√©dent / Suivant du navigateur, mais aussi de les retrouver dans l'historique du navigateur ou encore d'obtenir un lien direct vers la fiche √† partager.</p>
<p>Cliquer sur le bouton ¬´¬†Fermer¬†¬ª referme le panneau lat√©ral droit de lecture et d√©s√©lectionne le n≈ìud correspondant dans le graphe.</p>
<p>Les liens pr√©sents dans les fiches sont cliquables. Dans un navigateur o√π est ouvert un cosmoscope, vous pouvez ouvrir ces liens dans un nouvel onglet via un clic droit. Le titre du lien (affich√© en infobulle apr√®s 1-2 secondes de survol) est celui de la fiche correspondante.</p>
<p>En bas de chaque fiche se trouve une liste des liens sortants et des liens entrants (ou r√©troliens). Les liens et r√©troliens sont contextualis√©s¬†: au survol, une infobulle s'affiche, montrant le paragraphe qui entoure ce lien dans la fiche correspondante.</p>
<div class="note">
<p>Les liens et r√©troliens contextualis√©s font partie des fonctionnalit√©s les plus utiles des syst√®mes hypertextuels. C'est une fonctionnalit√© notoirement absente du Web. En revanche, de nombreuses applications de prise de notes interreli√©es traitent les liens comme un √©l√©ment de premi√®re importance, et cela inclut les r√©troliens contextualis√©s. Cependant, lorsque ces notes sont partag√©es sur le Web, cette fonctionnalit√© n'est pas toujours incluse, ou alors elle fait partie d'un service de publication payant. Avec Cosma, les r√©troliens contextualis√©s font partie du logiciel, que vous soyez l'auteur d'un cosmoscope travaillant sur sa machine, ou quelqu'un qui explore un cosmoscope sur le Web.</p>
</div>
<h3 id="mode-focus" tabindex="-1">Mode focus</h3>
<p>Le bouton Activer le focus (raccourci¬†: touche <code>F</code>) situ√© en bas √† gauche du graphe permet de restreindre l'affichage au n≈ìud s√©lectionn√©¬†: en mode focus, seules les connexions directes √† la fiche s√©lectionn√©e sont affich√©es dans l'interface. Le mode focus ne fonctionne que si vous avez s√©lectionn√© une fiche.</p>
<p>Le curseur qui appara√Æt sous le bouton Activer le focus permet de faire varier la distance d'affichage, jusqu'au maximum indiqu√© dans Pr√©f√©rences ‚Ä∫ Niveau maximum de focus. Une valeur de 1 signifie que seules les connexions imm√©diates seront affich√©es en mode Focus. Une valeur de 2 signifie que vous pouvez √©tendre le focus aux connexions des connexions, et ainsi de suite.</p>
<div class="astuce">
<p>Le curseur du niveau de focus est contr√¥lable via les fl√®ches du clavier. Vous pouvez encha√Æner les raccourcis¬†: <code>F</code> pour activer le focus, puis les fl√®ches pour augmenter le niveau de focus.</p>
</div>
<h3 id="moteur-de-recherche" tabindex="-1">Moteur de recherche</h3>
<p>Le champ de texte situ√© en haut du panneau lat√©ral gauche est un moteur de recherche qui fonctionne sur les titres de fiches. Il sugg√®re une liste de fiches dont le titre est le plus proche de ce que vous saisissez dans la barre de recherche (<em>fuzzy search</em>). Cliquer sur une suggestion s√©lectionne le n≈ìud correspondant dans le graphe et ouvre la fiche correspondante dans le panneau lat√©ral de droite.</p>
<div class="important">
<p>Les suggestions disponibles sont contraintes par les <a href="#filtrer-laffichage-par-types">filtres</a> et le <a href="#mode-focus">mode focus</a>¬†: une fiche masqu√©e par l'une ou l'autre de ces fonctionnalit√©s ne sera pas accessible via le moteur de recherche. Lorsque vous voulez repartir de z√©ro pour une nouvelle requ√™te, vous pouvez cliquer sur R√©initialiser l'affichage (raccourci¬†: <code>Alt</code> + <code>R</code>).</p>
</div>
<h3 id="filtrer-laffichage-par-types" tabindex="-1">Filtrer l'affichage par types</h3>
<p>La liste des types de fiches situ√©e en haut du panneau lat√©ral gauche permet de filtrer l'affichage. Cliquer sur un type permet de masquer et r√©afficher les fiches du type correspondant dans le graphe, l'index et les suggestions du moteur de recherche. Cliquer sur un type en maintenant la touche <code>Alt</code> enfonc√©e permet de masquer et r√©afficher les fiches des autres types.</p>
<p>Pour qu'un type apparaisse, il doit √™tre d√©clar√© dans le fichier de configuration et √™tre attribu√© √† au moins une fiche.</p>
<h3 id="mots-cles" tabindex="-1">Mots-cl√©s</h3>
<p>La liste des mots-cl√©s situ√©e dans le panneau lat√©ral gauche permet de mettre en √©vidence les fiches qui utilisent chaque mot-cl√© s√©lectionn√©. S√©lectionner un mot-cl√© met en surbrillance l'√©tiquette des n≈ìuds correspondants dans le graphe et restreint l'index aux fiches correspondantes. Vous pouvez activer simultan√©ment plusieurs mots-cl√©s. Pour d√©sactiver un mot-cl√©, cliquez √† nouveau sur le bouton correspondant.</p>
<p>Pour qu'un mot-cl√© apparaisse, il suffit qu'il ait √©t√© d√©clar√© dans l'en-t√™te YAML d'au moins une fiche avec le champ <code>tags</code> (ou <code>keywords</code>).</p>
<h3 id="index" tabindex="-1">Index</h3>
<p>L'index alphab√©tique des fiches situ√© dans le panneau lat√©ral gauche permet d'acc√©der directement √† une fiche sans passer par le graphe. Cliquer sur un titre s√©lectionne le n≈ìud correspondant dans le graphe et ouvre la fiche correspondante. L'index peut √™tre tri√© par ordre alphab√©tique croissant ou d√©croissant. Les filtres, les mots-cl√©s et le mode focus modifient l'affichage de l'index.</p>
<h3 id="vues" tabindex="-1">Vues</h3>
<p>Les Vues sont une fonctionnalit√© de la version GUI de Cosma, qui consiste √† sauvegarder l'√©tat du graphe (fiche s√©lectionn√©e, filtres actifs, mode focus) pour un acc√®s ult√©rieur, via l'ajout d'un bouton dans la section Vues du panneau lat√©ral gauche. Cliquer sur ce bouton applique tous les param√®tres qui √©taient actifs au moment de l'enregistrement de la vue. Cliquer √† nouveau sur le bouton r√©tablit l'affichage normal. Il n'est pas possible de cr√©er de vue depuis un cosmoscope en dehors de la version GUI.</p>
<h2 id="partage-et-publication-dun-cosmoscope" tabindex="-1">Partage et publication d'un cosmoscope</h2>
<p>Les cosmoscopes int√®grent les m√©tadonn√©es titre, auteur, description et mots-cl√©s si elles ont √©t√© renseign√©es dans le fichier de configuration. Ces m√©tadonn√©es sont affich√©es dans le panneau ¬´¬†√Ä propos¬†¬ª. Elles sont √©galement incluses dans le code source du cosmoscope sous la forme de balises <code>meta</code>, afin d'am√©liorer la description d'un cosmoscope destin√© √† √™tre publi√© sur le Web.</p>
<p>Un cosmoscope peut √™tre partag√© comme n'importe quel fichier informatique¬†: email, transfert de fichiers, messagerie, mise en ligne sur un serveur‚Ä¶</p>
<p>Dans le cas d'un cosmoscope publi√© sur le Web, il est possible de cr√©er un lien directement vers une fiche en ajoutant son identifiant pr√©c√©d√© d'un croisillon <code>#</code> en fin d'URL. Exemple¬†:</p>
<p><code>https://domaine.fr/cosmoscope.html#20210427185546</code></p>
<h2 id="credits" tabindex="-1">Cr√©dits</h2>
<h3 id="equipe" tabindex="-1">√âquipe</h3>
<ul>
<li><a href="https://www.arthurperret.fr/">Arthur Perret</a> (porteur du projet)</li>
<li><a href="https://myllaume.fr/">Guillaume Brioudes</a> (d√©veloppeur)</li>
<li><a href="https://mica.u-bordeaux-montaigne.fr/borel-clement/">Cl√©ment Borel</a> (chercheur)</li>
<li><a href="http://www.guidedesegares.info/">Olivier Le Deuff</a> (chercheur)</li>
</ul>
<h3 id="bibliotheques-utilisees" tabindex="-1">Biblioth√®ques utilis√©es</h3>
<p>Pour am√©liorer la maintenabilit√© et la lisibilit√© du code source, l‚Äô√©quipe de d√©veloppement a recouru aux biblioth√®ques suivantes¬†:</p>
<ul>
<li><a href="https://d3js.org/">D3.js</a> v4.13.0 (BSD 3-Clause)¬†: G√©n√©ration du graphe</li>
<li><a href="https://mozilla.github.io/nunjucks/">Nunjucks</a> v3.2.3 (BSD 2-Clause)¬†: G√©n√©ration du template du cosmoscope</li>
<li><a href="https://github.com/nodeca/js-yaml">Js-yaml</a> v4.1.0 (MIT License)¬†: Lecture du fichier de configuration et √©criture de l'en-t√™te YAML</li>
<li><a href="https://github.com/dworthen/js-yaml-front-matter">Js-yaml-front-matter</a> v4.1.1 (MIT License)¬†: Lecture de l'en-t√™te YAML des fichiers Markdown</li>
<li><a href="https://github.com/markdown-it/markdown-it">Markdown-it</a> v12.3.0 (MIT License)¬†: Conversion Markdown ‚Üí HTML</li>
<li><a href="https://www.npmjs.com/package/markdown-it-attrs">Markdown-it-attrs</a> v4.0.0  (MIT License)¬†: Traitement des hyperliens Markdown au sein des fiches</li>
<li><a href="https://github.com/Juris-M/citeproc-js">Citeproc-js</a> v2.4.62 (CPAL et AGPL)¬†: Conversion des cl√©s de citation</li>
<li><a href="https://fusejs.io/">Fuse.js</a> v6.4.6 (Apache License 2.0)¬†: Moteur de recherche</li>
<li><a href="https://momentjs.com/">Moment</a> v2.29.1 (MIT License)¬†: Gestion de l'horodatage</li>
</ul>
<h2 id="changelog" tabindex="-1">Changelog</h2>

    </main>

    <aside id="toc">
	<nav class="toc" >
        <ul><li><a href="#installation-et-mise-a-jour">Installation et mise √† jour</a><ul><li><a href="#installation">Installation</a></li><li><a href="#mise-a-jour">Mise √† jour</a></li></ul></li><li><a href="#presentation">Pr√©sentation</a></li><li><a href="#la-commande-cosma">La commande cosma</a><ul><li><a href="#creer-le-repertoire-de-donnees-utilisateur">Cr√©er le r√©pertoire de donn√©es utilisateur</a></li><li><a href="#afficher-les-projets">Afficher les projets</a></li><li><a href="#afficher-le-numero-de-version">Afficher le num√©ro de version</a></li><li><a href="#afficher-laide">Afficher l'aide</a></li></ul></li><li><a href="#configuration">Configuration</a><ul><li><a href="#creer-un-fichier-de-configuration">Cr√©er un fichier de configuration</a></li><li><a href="#creer-un-fichier-de-configuration-global-(projet)">Cr√©er un fichier de configuration global (projet)</a></li><li><a href="#creer-un-fichier-de-configuration-par-defaut">Cr√©er un fichier de configuration par d√©faut</a></li><li><a href="#parametres-de-configuration">Param√®tres de configuration</a></li><li><a href="#modele-de-configuration">Mod√®le de configuration</a></li></ul></li><li><a href="#creer-du-contenu-donnees-tabulaires-(csv)">Cr√©er du contenu¬†: donn√©es tabulaires (CSV)</a></li><li><a href="#creer-du-contenu-fichiers-texte-(markdown)">Cr√©er du contenu¬†: fichiers texte (Markdown)</a><ul><li><a href="#metadonnees">M√©tadonn√©es</a></li><li><a href="#contenu">Contenu</a></li><li><a href="#liens">Liens</a></li><li><a href="#identifiants-uniques">Identifiants uniques</a></li></ul></li><li><a href="#creer-des-fiches">Cr√©er des fiches</a><ul><li><a href="#record-creer-une-fiche-(mode-formulaire)">record : cr√©er une fiche (mode formulaire)</a></li><li><a href="#autorecord-creer-une-fiche-(mode-one-liner)">autorecord : cr√©er une fiche (mode one-liner)</a></li><li><a href="#batch-creer-un-lot-de-fiches">batch : cr√©er un lot de fiches</a></li></ul></li><li><a href="#modelize-creer-un-cosmoscope">modelize : cr√©er un cosmoscope</a><ul><li><a href="#generer-un-cosmoscope-dexemple">G√©n√©rer un cosmoscope d'exemple</a></li><li><a href="#traiter-les-citations">Traiter les citations</a></li><li><a href="#appliquer-une-css-personnalisee">Appliquer une CSS personnalis√©e</a></li><li><a href="#utiliser-un-fichier-de-configuration-global">Utiliser un fichier de configuration global</a></li><li><a href="#exclure-certaines-fiches-du-cosmoscope">Exclure certaines fiches du cosmoscope</a></li><li><a href="#historique">Historique</a></li><li><a href="#rapport-derreurs">Rapport d'erreurs</a></li></ul></li><li><a href="#utilisation-du-cosmoscope">Utilisation du cosmoscope</a><ul><li><a href="#graphe">Graphe</a></li><li><a href="#fiches">Fiches</a></li><li><a href="#mode-focus">Mode focus</a></li><li><a href="#moteur-de-recherche">Moteur de recherche</a></li><li><a href="#filtrer-laffichage-par-types">Filtrer l'affichage par types</a></li><li><a href="#mots-cles">Mots-cl√©s</a></li><li><a href="#index">Index</a></li><li><a href="#vues">Vues</a></li></ul></li><li><a href="#partage-et-publication-dun-cosmoscope">Partage et publication d'un cosmoscope</a></li><li><a href="#credits">Cr√©dits</a><ul><li><a href="#equipe">√âquipe</a></li><li><a href="#bibliotheques-utilisees">Biblioth√®ques utilis√©es</a></li></ul></li><li><a href="#changelog">Changelog</a></li></ul>
      </nav>
</aside>

    <footer>
    
    
    <p>
        Cosma est un logiciel libre, diffus√© sous licence <a href="https://opensource.org/licenses/GPL-3.0">GPL-3.0-or-later</a>.<br/>
        Cette documentation a √©t√© fabriqu√©e avec <a href="https://www.11ty.dev/">11ty</a>.
    </p>
    
</footer>

    <script>    
(function() {
  document.querySelectorAll('#toc > nav > ul > li').forEach( function(li) {
    if (li.children.length > 1) {
      var toggle = document.createElement('span');
      toggle.className = 'toggle';
      toggle.innerHTML = '‚ñ∏';
      toggle.onclick = function() {
        var sublist = li.getElementsByTagName('ul')[0];
        if (sublist) {
          if (sublist.style.display === 'none') {
            sublist.style.display = 'block'
            toggle.innerHTML = '‚ñæ';
          } else {
            sublist.style.display = 'none';
            toggle.innerHTML = '‚ñ∏';
          }
        }
      };
      li.appendChild(toggle);
      toggle.click();
    }
  });
})();
</script>

</body>

</html>